<script>
$(function() {
	
	function switchTab(tab) {
		try {
          var panelId = tab.attr('id').split('Tab')[0];
        } catch(e) {
          var panelId = tab;
          var navTabId = tab + 'Tab';
        }
		
		//hide content & remove active class
		$("#panels").children()
					.hide()
					.removeClass('hide');
		$('.navTab, form.navbar-form').removeClass('active');
		
		//show content & add active class
		$("#" + panelId).show();
		if(panelId == 'searchTasks') {
			$('form.navbar-form').addClass('active');
		} else {
			if(navTabId) {
				$('#' + navTabId).addClass('active');
			} else {
				tab.addClass('active')
			}
		}
		
	}
    
    function onSuccess(return_obj) {
      console.log(return_obj);
      switchTab(return_obj);
    }
    
    function onFailure(return_obj) {
      console.log('failed!');
      console.log(return_obj.message);
    }
    
    //do the url parameter onload fun stuff
    google.script.run.withSuccessHandler(onSuccess)
	                 .withFailureHandler(onFailure)
	                 .getPageToLoad();
    
	$('.navTab').on('click tap', function(e) {
		e.preventDefault();
		switchTab($(this));
	});
});
</script>