<div>
	<h2>Parse Dashboard - Purely for Testing Parse Functionality</h2>
	<ul>
		<li>Create - Check!</li>
		<li>Read - Check!</li>
		<li>Read Selectively - Check!</li>
		<li>Update</li>
		<li>Delete</li>
	</ul>
	<form id="parsePost">
	<h3>Create a Task</h3>
		<label for="taskName">Task Name: </label>
		<input type="text" id="taskName" />
		<label for="requestingOffice">Requesting Office: </label>
		<input type="text" id="requestingOffice" />
		<button class="btn" type="Submit" id="postTask">Upload a new task!</button>
	</form>
	<hr />
	<form id="parseRead">
		<h3>Read All Tasks</h3>
		<button class="btn" type="Submit" id="readTasks">Click for all tasks!</button>
		<ul id="allTasks"></ul>
	</form>
	<hr />
	<form id="parseReadSome">
		<h3>Read Some Tasks</h3>
		<label for="queryText">Search Text: </label>
		<input type="text" id="queryText" />
		<button class="btn" type="Submit" id="readSomeTasks">Search!</button>
		<ul id="someTasks"></ul>
	</form>
</div>
<!-- Call jQuery libraries -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>

<script>
$(function() {
	console.log('function started');
	var taskName = $( "#taskName" ),
	requestingOffice = $( "#requestingOffice" ),
	postForm = $( "#parsePost" ),
	submitButton = $( "#postTask" ),
	getAllTasksButton = $( "#readTasks" ),
	getSomeTasksButton = $( "#readSomeTasks" ),
	queryText = $( "#queryText" ),
	taskListUl = $( "#allTasks" ),
	someTasksUl = $( "#someTasks" );
	
	function onSuccessCreate(return_obj) {
		postForm[0].reset();
		submitButton.prop("disabled",false)
	}
	
	function onSuccessRead(return_obj) {
		var currentTask;
		taskListUl.empty();
		for(var i=0; i<return_obj.length; i++) {
			currentTask = return_obj[i];
			taskListUl.append($("<li><b>Name</b>: " + currentTask.Name + " <b>Requesting Office</b>: " + currentTask.ReqOffice + "</li>"));
			console.log(currentTask.Name + ' ' + currentTask.ReqOffice);
		}
		getAllTasksButton.prop("disabled",false);
	}
	
	function onSuccessQuery(return_obj) {
		var currentTask;
		someTasksUl.empty();
		if(return_obj[0] == 'No Results!') {
			someTasksUl.append($("<li><b>" + return_obj[0] + "</b></li>"));
		} else {
			for(var i=0; i<return_obj.length; i++) {
				currentTask = return_obj[i];
				someTasksUl.append($("<li><b>Name</b>: " + currentTask.Name + " <b>Requesting Office</b>: " + currentTask.ReqOffice + "</li>"));
				console.log(currentTask.Name + ' ' + currentTask.ReqOffice);
			}
		}
		getSomeTasksButton.prop("disabled",false);
	}
	
	function onFailure(return_obj) {
		console.log(return_obj.message);
	}
	
	submitButton.click(function() {
		$(this).prop("disabled",true);
		google.script.run.withSuccessHandler(onSuccessCreate)
	                     .withFailureHandler(onFailure)
	                     .postTask(taskName.val(), requestingOffice.val());
	});
	
	getAllTasksButton.click(function() {
		$(this).prop("disabled",true);
		google.script.run.withSuccessHandler(onSuccessRead)
	                     .withFailureHandler(onFailure)
	                     .getAllTasks();
	});
	
	getSomeTasksButton.click(function() {
		$(this).prop("disabled",true);
		google.script.run.withSuccessHandler(onSuccessQuery)
	                     .withFailureHandler(onFailure)
	                     .getSpecificTasks(queryText.val());
	});
});

</script>
